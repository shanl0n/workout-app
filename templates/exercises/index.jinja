{% extends 'base.jinja' %}

{% block content %} 
{% with messages = get_flashed_messages() %}
  {% if messages %}
  <div class="flash-container">
    {% for message in messages %}
    <div class="flash-msg bg-orange">
      {{ message }}
    </div>
    {% endfor %}
  </div>
  {% endif %}
{% endwith %}
  <div class="tables-container centered-flex">
    <div class="completed-table">
      <p><h2>Completed</h2></p>
      <table class="tables">
      <tr>
        <th class="table__header">Name</th>
        <th class="table__header">Sets</th>
        <th class="table__header">Reps</th>
      </tr>
      {% for exercise in exercises  %}
        {% if exercise.completed %}
          <tr>
            <td><a href="/exercises/{{exercise.id}}">{{ exercise.name }}</a></td>
            <td>{{ exercise.sets }}</td>
            <td>{{ exercise.reps }}</td>
            <td class="table-button"><form action="/exercises/{{ exercise.id }}/toggle_completed" method="POST">
              <input type="submit" value="Mark as incomplete"></form></td>
            <td class="table-button"><a href="/exercises/{{ exercise.id }}/edit">Edit</a></td>
            <td class="table-button"><form action="/exercises/{{ exercise.id }}/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete this exercise?')">
              <input type="submit" value="Delete">
            </form></td>
          </tr>
          {% endif %}
        {% endfor %}
    </table>
    </div>
    <div class="incomplete-table">
    <table class="tables">
        <h2>Incomplete</h2>
    <tr>
      <th class="table__header">Name</th>
      <th class="table__header">Sets</th>
      <th class="table__header">Reps</th>
    </tr>
        <div>{% for exercise in exercises  %}
          {% if not exercise.completed %}
            <tr>
              <td><a href="/exercises/{{exercise.id}}">{{ exercise.name }}</a></td>
              <td>{{ exercise.sets }}</td>
              <td>{{ exercise.reps }}</td>
              <td class="table-button"><form action="/exercises/{{ exercise.id }}/toggle_completed" method="POST">
            <input type="submit" value="Mark as complete"></form></td>
              <td class="table-button"><a href="/exercises/{{ exercise.id }}/edit">Edit</a></td>
              <td class="table-button"><form action="/exercises/{{ exercise.id }}/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete this exercise?')">
                <input type="submit" value="Delete" class="table-button">
              </form></td>
            </tr>
          {% endif %}
    {% endfor %}</div>
    </table>
    <div class="completed-table"></div>
  </div>
</div>
{# {% for exercise in exercises %}
<div class="exercise">
  <div class="exercise__content">
    <div class="exercise__description">
      <a href="/exercises/{{exercise.id}}">{{ exercise.name }}</a>

      <span class="exercise__details">{{ exercise.sets }} Sets</span>
      <span class="exercise__details">{{ exercise.reps }} Reps</span>
      <a href="/exercises/{{ exercise.id }}/edit">Edit exercise</a> 
    </div>
    <hr />

    <div class="buttons">
      <form
        class="delete-form"
        action="/exercises/{{exercise.id}}/delete"
        method="POST"
      >
        <button class="trash-button">
          <i
            class="fa fa-trash-o fa-3x"
            style="color: red"
            aria-hidden="true"
          ></i>
        </button>
      </form>

      {% if exercise.completed == True %}
      <i class="fa fa-check fa-2x" style="color: green" aria-hidden="true"></i>
      {% else %}
      <i class="fa fa-times fa-2x" aria-hidden="true"></i>
      {% endif %}
    </div>
{% endfor %}  #}
    
{% endblock %}
